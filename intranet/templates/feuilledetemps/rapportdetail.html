{% extends "base.html" %}
{% block title %}Rapports{% endblock title %}
{% block extrahead %}
<link rel="stylesheet" href="{{STATIC_URL}}css\datepicker.css" />
<script type="text/javascript" src="{{STATIC_URL}}js/bootstrap-datepicker.js"></script>
{% endblock extrahead %}
{% block jquery %}
$( "#datepicker1" ).datepicker({format: 'yyyy-mm-dd'});
$( "#datepicker2" ).datepicker({format: 'yyyy-mm-dd'});
{% endblock jquery %}
{% block nav-eci %}<li class="dropdown active">{% endblock nav-eci %}
{% block content %}
<div class="row-fluid well">
	<div class="span12">
		<h4>Rapport de temps des tâches du projet</h4>
		<h3>{{ numero_projet }}</h3>
		<table class="table table-striped table-bordered table-condensed">
			<thead>
				<tr>
					<th>Tâche</th>
					<th>Détails</th>
					<th>Temps</th>
				</tr>
			</thead>
			<tfoot>
				<tr>
					<td></td><th>Total:</th><th>{{total.total}}</th>
				</tr>
				<tr>
					<td colspan='3'><a href='getcsv'>Télécharger .xls</a></td>
				</tr>
			</tfoot>
			<tbody>
		{% for f in rapport %}
			<tr>
			<td><a href='{% url 'feuilledetemps.views.tachedetail' f.tache__numero %}'>{{f.tache__numero}} {{f.tache__description}}</a></td>
			<td><a href='{% url 'feuilledetemps.views.projettachedetail' numero_tache=f.tache__numero numero_projet=f.projet__numero %}'><i class="icon-user"></i></a></td>
			<td>{{f.heure}}</td>
			</tr>
		{% endfor %}
		</tbody>
		</table>
	</div>
</div>

<div class="row-fluid well">
	<div class="span12">
		<form class="form-inline" action="" method="post">{% csrf_token %}
			<p>Affichez les blocs de temps de l'intervalle suivant:</p>
			<p><label for="datepicker1">Date début:</label>
			<input class="input-small" id="datepicker1" type="text" name="date_debut" />
			<label for="datepicker2"> Date fin:</label>
			<input class="input-small" type="text" name="date_fin" id="datepicker2" value="{{ date }}" />
			<input class="btn" type="submit" value="Rechercher" /></p>
			{% if form.errors %}
			<p>Vous n'avez pas remplie les champs correctement</p>
			{% endif %}
		</form>
	</div>
</div>
{% endblock %}